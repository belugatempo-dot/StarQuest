<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å¤ºæ˜Ÿå¤§é—¯å…³ â€” äº§å“æ¼”ç¤º</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;900&family=Outfit:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CSS VARIABLES & RESET
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --night-deep: #0a0e1a;
  --night-mid: #0f172a;
  --night-swirl: #1e3a5f;
  --night-bright: #2563eb;
  --cosmic-purple: #312e81;
  --star-gold: #FFD700;
  --star-glow: #FEF08A;
  --star-warm: #FBBF24;
  --success: #10B981;
  --warning: #F59E0B;
  --danger: #EF4444;
  --indigo: #4F46E5;
  --teal: #81D8D0;
  --text-primary: #f1f5f9;
  --text-secondary: #94a3b8;
  --glass-bg: rgba(255,255,255,0.06);
  --glass-border: rgba(255,255,255,0.1);
}

*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
html { font-size: 16px; -webkit-font-smoothing: antialiased; }

body {
  background: var(--night-deep);
  color: var(--text-primary);
  font-family: 'Noto Sans SC', 'Outfit', sans-serif;
  overflow: hidden;
  width: 100vw;
  height: 100vh;
  cursor: default;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STARFIELD CANVAS & NEBULA
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#starfield { position: fixed; inset: 0; z-index: 0; }

.nebula {
  position: fixed; inset: 0; z-index: 1; pointer-events: none;
  background:
    radial-gradient(ellipse 80% 60% at 20% 40%, rgba(37,99,235,0.12) 0%, transparent 60%),
    radial-gradient(ellipse 60% 80% at 80% 60%, rgba(49,46,129,0.15) 0%, transparent 60%),
    radial-gradient(ellipse 40% 40% at 50% 20%, rgba(255,215,0,0.04) 0%, transparent 50%);
  animation: nebulaDrift 20s ease-in-out infinite alternate;
}

@keyframes nebulaDrift {
  0%   { transform: translate(0, 0) scale(1); }
  100% { transform: translate(-20px, 10px) scale(1.05); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCENE SYSTEM
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.scene {
  position: fixed; inset: 0; z-index: 10;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  opacity: 0; pointer-events: none;
  transition: opacity 1s cubic-bezier(0.4, 0, 0.2, 1);
  padding: 2rem;
}
.scene.active { opacity: 1; pointer-events: auto; }

.scene.active .reveal { animation: revealUp 0.9s cubic-bezier(0.16, 1, 0.3, 1) both; }
.scene.active .reveal-d1 { animation-delay: 0.15s; }
.scene.active .reveal-d2 { animation-delay: 0.3s; }
.scene.active .reveal-d3 { animation-delay: 0.45s; }
.scene.active .reveal-d4 { animation-delay: 0.6s; }
.scene.active .reveal-d5 { animation-delay: 0.75s; }
.scene.active .reveal-d6 { animation-delay: 0.9s; }
.scene.active .reveal-d7 { animation-delay: 1.05s; }
.scene.active .reveal-d8 { animation-delay: 1.2s; }

@keyframes revealUp {
  from { opacity: 0; transform: translateY(40px) scale(0.95); filter: blur(8px); }
  to   { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
}
@keyframes revealScale {
  from { opacity: 0; transform: scale(0.5); filter: blur(12px); }
  to   { opacity: 1; transform: scale(1); filter: blur(0); }
}
@keyframes revealLeft {
  from { opacity: 0; transform: translateX(-60px) rotate(-2deg); }
  to   { opacity: 1; transform: translateX(0) rotate(0); }
}
@keyframes revealRight {
  from { opacity: 0; transform: translateX(60px) rotate(2deg); }
  to   { opacity: 1; transform: translateX(0) rotate(0); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TYPOGRAPHY
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.font-display { font-family: 'Cinzel', serif; }
.font-body    { font-family: 'Noto Sans SC', 'Outfit', sans-serif; }
.font-cn      { font-family: 'Noto Sans SC', 'Outfit', sans-serif; }
.font-en      { font-family: 'Outfit', sans-serif; }

.text-hero {
  font-size: clamp(3rem, 8vw, 7rem); font-weight: 900;
  letter-spacing: 0.04em; line-height: 1.1;
}
.text-title {
  font-size: clamp(1.8rem, 4vw, 3.5rem); font-weight: 700;
  letter-spacing: 0.02em; line-height: 1.2;
}
.text-subtitle {
  font-size: clamp(1rem, 2vw, 1.5rem); font-weight: 300;
  letter-spacing: 0.06em; line-height: 1.6;
}
.text-label {
  font-size: clamp(0.75rem, 1.2vw, 1rem); font-weight: 500;
  letter-spacing: 0.12em; text-transform: uppercase;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GOLDEN TEXT EFFECTS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.text-gold {
  background: linear-gradient(135deg, var(--star-warm) 0%, var(--star-gold) 40%, var(--star-glow) 60%, var(--star-gold) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.text-gold-glow {
  text-shadow: 0 0 20px rgba(255,215,0,0.4), 0 0 40px rgba(255,215,0,0.2), 0 0 80px rgba(255,215,0,0.1);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GLASS CARD
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.glass {
  background: var(--glass-bg); border: 1px solid var(--glass-border);
  border-radius: 16px; backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
}
.glass-strong {
  background: rgba(15,23,42,0.85); border: 1px solid rgba(255,255,255,0.08);
  border-radius: 16px; backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCENE 0: COLD OPEN
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#scene-0 .logo-star {
  font-size: 6rem; animation: starPulse 2s ease-in-out infinite;
  filter: drop-shadow(0 0 30px rgba(255,215,0,0.6));
}
@keyframes starPulse {
  0%, 100% { transform: scale(1) rotate(0deg); filter: drop-shadow(0 0 30px rgba(255,215,0,0.6)); }
  50%      { transform: scale(1.15) rotate(8deg); filter: drop-shadow(0 0 50px rgba(255,215,0,0.8)); }
}
.brand-badge {
  display: inline-flex; align-items: center; gap: 0.5rem;
  padding: 0.35rem 1rem; border-radius: 999px;
  background: rgba(79,70,229,0.25); border: 1px solid rgba(79,70,229,0.4);
  font-size: 0.85rem; font-weight: 500; letter-spacing: 0.08em; color: #a5b4fc;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCENE 1: TAGLINE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.tagline-divider {
  width: 80px; height: 2px;
  background: linear-gradient(90deg, transparent, var(--star-gold), transparent);
  margin: 1.5rem auto;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCENE 2: QUEST TYPES
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.quest-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; max-width: 900px; width: 100%; }
.quest-card {
  padding: 2rem 1.5rem; text-align: center;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  position: relative; overflow: hidden;
}
.quest-card::before {
  content: ''; position: absolute; inset: 0; border-radius: 16px; padding: 1px;
  background: linear-gradient(135deg, var(--card-accent), transparent 60%);
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
}
.quest-card .icon { font-size: 3.5rem; margin-bottom: 1rem; display: block; }
.quest-card .card-title { font-family: 'Noto Sans SC', serif; font-size: 1.3rem; font-weight: 700; margin-bottom: 0.5rem; }
.quest-card .card-desc { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.5; }
.quest-card.bonus    { --card-accent: var(--star-gold); }
.quest-card.duty     { --card-accent: var(--warning); }
.quest-card.violation { --card-accent: var(--danger); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCENE 3: STAR EARNING
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.star-counter {
  display: flex; align-items: center; gap: 1rem;
  padding: 1.5rem 3rem; border-radius: 999px;
  background: rgba(255,215,0,0.08); border: 1px solid rgba(255,215,0,0.2);
}
.star-counter .count {
  font-family: 'Cinzel', serif; font-size: clamp(3rem, 6vw, 5rem); font-weight: 900;
  font-variant-numeric: tabular-nums; min-width: 3ch; text-align: right;
}
.star-counter .star-icon { font-size: 3rem; animation: starPulse 1.5s ease-in-out infinite; }
.multiplier-badge {
  display: inline-flex; align-items: center; justify-content: center;
  padding: 0.5rem 1.5rem; border-radius: 999px;
  font-family: 'Cinzel', serif; font-size: 1.8rem; font-weight: 900;
  background: linear-gradient(135deg, rgba(255,215,0,0.15), rgba(255,215,0,0.05));
  border: 2px solid var(--star-gold); color: var(--star-gold); transition: all 0.3s ease;
}
.multiplier-badge.active {
  background: linear-gradient(135deg, var(--star-gold), var(--star-warm));
  color: var(--night-deep); box-shadow: 0 0 30px rgba(255,215,0,0.5); transform: scale(1.1);
}
.multiplier-row { display: flex; gap: 0.75rem; margin-top: 1.5rem; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCENE 4: PARENT DASHBOARD
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.dashboard-mock {
  width: min(900px, 90vw); border-radius: 20px; overflow: hidden;
  box-shadow: 0 25px 60px rgba(0,0,0,0.5), 0 0 1px rgba(255,255,255,0.1);
}
.dash-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 1rem 1.5rem; background: rgba(15,23,42,0.95);
  border-bottom: 1px solid rgba(255,255,255,0.06);
}
.dash-header .logo-sm { display: flex; align-items: center; gap: 0.5rem; font-family: 'Cinzel', serif; font-weight: 700; font-size: 1.1rem; }
.dash-header .nav-dots { display: flex; gap: 0.5rem; }
.dash-header .nav-dot { width: 8px; height: 8px; border-radius: 50%; background: rgba(255,255,255,0.15); }
.dash-header .nav-dot.active { background: var(--star-gold); box-shadow: 0 0 8px rgba(255,215,0,0.5); }
.dash-body { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; padding: 1.5rem; background: rgba(10,14,26,0.95); }
.dash-stat { padding: 1.25rem; border-radius: 12px; background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.06); }
.dash-stat .stat-icon { font-size: 1.5rem; margin-bottom: 0.5rem; }
.dash-stat .stat-label { font-size: 0.75rem; color: var(--text-secondary); letter-spacing: 0.08em; margin-bottom: 0.25rem; }
.dash-stat .stat-value { font-family: 'Cinzel', serif; font-size: 1.8rem; font-weight: 700; }
.dash-stat .stat-value.gold { color: var(--star-gold); }
.dash-stat .stat-value.green { color: var(--success); }
.dash-stat .stat-value.blue { color: var(--night-bright); }
.dash-stat .stat-value.purple { color: #a78bfa; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCENE 5: CHILD QUEST BOARD
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.quest-board { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; max-width: 700px; width: 100%; }
.board-quest {
  display: flex; align-items: center; gap: 1rem;
  padding: 1rem 1.25rem; border-radius: 14px;
  background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.06);
  transition: all 0.3s ease;
}
.board-quest .q-icon { font-size: 2rem; flex-shrink: 0; }
.board-quest .q-info { flex: 1; }
.board-quest .q-name { font-weight: 600; font-size: 0.95rem; margin-bottom: 0.15rem; }
.board-quest .q-cat  { font-size: 0.75rem; color: var(--text-secondary); }
.board-quest .q-stars { font-family: 'Cinzel', serif; font-weight: 700; color: var(--star-gold); font-size: 1.1rem; white-space: nowrap; }
.board-quest.completing {
  border-color: rgba(16,185,129,0.4); background: rgba(16,185,129,0.08);
  box-shadow: 0 0 20px rgba(16,185,129,0.15);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCENE 6: REWARDS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.rewards-showcase { display: flex; gap: 1.5rem; justify-content: center; flex-wrap: wrap; max-width: 800px; }
.reward-item {
  display: flex; flex-direction: column; align-items: center;
  padding: 1.5rem 2rem; border-radius: 16px;
  background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08);
  min-width: 140px; transition: all 0.4s ease;
}
.reward-item .r-icon { font-size: 2.5rem; margin-bottom: 0.75rem; }
.reward-item .r-name { font-weight: 600; font-size: 0.9rem; margin-bottom: 0.5rem; text-align: center; }
.reward-item .r-cost { font-family: 'Cinzel', serif; font-weight: 700; color: var(--star-gold); font-size: 1rem; }
.reward-item.redeeming {
  border-color: rgba(255,215,0,0.4); background: rgba(255,215,0,0.08);
  transform: scale(1.05); box-shadow: 0 0 30px rgba(255,215,0,0.2);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCENE 7: CALENDAR VIEW
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.calendar-mock {
  width: min(520px, 90vw); border-radius: 20px; overflow: hidden;
  box-shadow: 0 25px 60px rgba(0,0,0,0.5);
  background: linear-gradient(135deg, #0f172a 0%, #1e3a5f 50%, #312e81 100%);
  position: relative;
}
.calendar-mock::before {
  content: ''; position: absolute; inset: 0;
  background: radial-gradient(circle at 30% 20%, rgba(255,215,0,0.03) 0%, transparent 50%);
  pointer-events: none;
}
.cal-nav {
  display: flex; align-items: center; justify-content: space-between;
  padding: 1rem 1.25rem;
}
.cal-nav .cal-month {
  font-family: 'Noto Sans SC', serif; font-size: 1.25rem; font-weight: 700;
  text-shadow: 0 0 10px rgba(254,240,138,0.3);
}
.cal-nav .cal-btn {
  width: 32px; height: 32px; border-radius: 8px; border: none;
  background: rgba(255,255,255,0.1); color: white; cursor: pointer;
  font-size: 0.9rem; display: flex; align-items: center; justify-content: center;
}
.cal-nav .cal-today-btn {
  padding: 0.3rem 0.75rem; border-radius: 8px; border: none;
  background: var(--star-gold); color: var(--night-deep);
  font-weight: 600; font-size: 0.75rem; cursor: pointer;
}
.cal-weekdays {
  display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px;
  padding: 0 0.75rem; margin-bottom: 4px;
}
.cal-weekdays span {
  text-align: center; font-size: 0.7rem; font-weight: 600;
  color: var(--star-glow); text-shadow: 0 0 6px rgba(254,240,138,0.3);
  padding: 0.25rem 0;
}
.cal-grid {
  display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px;
  padding: 0 0.75rem 1rem;
}
.cal-day {
  aspect-ratio: 1; border-radius: 10px; padding: 4px 5px;
  display: flex; flex-direction: column; align-items: center;
  font-size: 0.8rem; font-weight: 500; position: relative;
  border: 2px solid rgba(255,255,255,0.06);
  background: rgba(255,255,255,0.03);
  transition: all 0.4s ease;
}
.cal-day.empty { border-color: transparent; background: transparent; }
.cal-day .day-num { font-size: 0.75rem; line-height: 1; margin-bottom: 2px; }
.cal-day .day-dots { display: flex; gap: 3px; margin-top: auto; }
.cal-day .day-dot {
  width: 5px; height: 5px; border-radius: 50%;
}
.cal-day .day-dot.positive { background: #4ade80; box-shadow: 0 0 4px rgba(74,222,128,0.6); }
.cal-day .day-dot.negative { background: #f87171; box-shadow: 0 0 4px rgba(248,113,113,0.6); }
.cal-day .day-stars {
  font-size: 0.55rem; font-weight: 700; font-family: 'Cinzel', serif;
  margin-top: 1px; line-height: 1;
}
.cal-day .day-stars.pos { color: #4ade80; }
.cal-day .day-stars.neg { color: #f87171; }
.cal-day.today {
  border-color: var(--star-warm); background: rgba(251,191,36,0.12);
}
.cal-day.selected {
  border-color: var(--star-gold); background: rgba(255,215,0,0.15);
  box-shadow: 0 0 15px rgba(255,215,0,0.3);
}
.cal-legend {
  display: flex; gap: 1.25rem; justify-content: center;
  padding: 0.75rem; border-top: 1px solid rgba(255,255,255,0.08);
  font-size: 0.65rem; color: var(--text-secondary);
}
.cal-legend-item { display: flex; align-items: center; gap: 4px; }
.cal-legend-box {
  width: 12px; height: 12px; border-radius: 3px;
}

/* Side activity list mockup */
.cal-layout {
  display: flex; gap: 1.5rem; align-items: flex-start; max-width: 900px; width: 100%;
}
.cal-sidebar {
  flex: 1; min-width: 0;
  display: flex; flex-direction: column; gap: 0.5rem;
}
.cal-activity-item {
  display: flex; align-items: center; gap: 0.75rem;
  padding: 0.65rem 0.85rem; border-radius: 10px;
  background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.06);
  font-size: 0.8rem;
}
.cal-activity-item .cai-icon { font-size: 1.2rem; }
.cal-activity-item .cai-info { flex: 1; }
.cal-activity-item .cai-name { font-weight: 600; font-size: 0.8rem; }
.cal-activity-item .cai-time { font-size: 0.65rem; color: var(--text-secondary); }
.cal-activity-item .cai-stars { font-family: 'Cinzel', serif; font-weight: 700; font-size: 0.9rem; }
.cal-activity-item .cai-stars.pos { color: #4ade80; }
.cal-activity-item .cai-stars.neg { color: #f87171; }

.cal-date-header {
  font-size: 0.7rem; font-weight: 600; color: var(--star-gold);
  letter-spacing: 0.08em; padding: 0.25rem 0;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCENE 8: CREDIT SYSTEM
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.credit-layout {
  display: flex; gap: 1.5rem; max-width: 800px; width: 100%;
  justify-content: center; flex-wrap: wrap;
}
.credit-card {
  flex: 1; min-width: 280px; max-width: 360px;
  padding: 1.5rem; border-radius: 16px;
  position: relative; overflow: hidden;
}
.credit-card.enabled {
  background: rgba(79,70,229,0.08); border: 1px solid rgba(79,70,229,0.3);
}
.credit-card.debt {
  background: linear-gradient(135deg, rgba(239,68,68,0.06), rgba(249,115,22,0.06));
  border: 1px solid rgba(249,115,22,0.3);
}
.credit-card .cc-avatar {
  width: 40px; height: 40px; border-radius: 50%;
  background: rgba(255,255,255,0.1); display: flex; align-items: center;
  justify-content: center; font-size: 1.2rem; margin-bottom: 0.75rem;
}
.credit-card .cc-name {
  font-family: 'Noto Sans SC', serif; font-size: 1.1rem; font-weight: 700; margin-bottom: 0.25rem;
}
.credit-card .cc-badge {
  display: inline-block; padding: 0.15rem 0.5rem; border-radius: 999px;
  font-size: 0.65rem; font-weight: 600; letter-spacing: 0.06em;
  margin-bottom: 1rem;
}
.credit-card .cc-badge.on  { background: rgba(79,70,229,0.2); color: #a5b4fc; }
.credit-card .cc-badge.warn { background: rgba(239,68,68,0.2); color: #fca5a5; }

.credit-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; margin-bottom: 1rem; }
.credit-stats .cs-item {}
.credit-stats .cs-label { font-size: 0.65rem; color: var(--text-secondary); letter-spacing: 0.06em; }
.credit-stats .cs-value { font-family: 'Cinzel', serif; font-size: 1.1rem; font-weight: 700; }
.credit-stats .cs-value.gold   { color: var(--star-gold); }
.credit-stats .cs-value.green  { color: var(--success); }
.credit-stats .cs-value.red    { color: var(--danger); }
.credit-stats .cs-value.purple { color: #a78bfa; }

.usage-bar-wrap {
  margin-top: 0.25rem;
}
.usage-bar-label {
  display: flex; justify-content: space-between; font-size: 0.65rem;
  color: var(--text-secondary); margin-bottom: 0.25rem;
}
.usage-bar {
  height: 8px; border-radius: 999px;
  background: rgba(255,255,255,0.08); overflow: hidden;
}
.usage-bar-fill {
  height: 100%; border-radius: 999px; transition: width 1.5s cubic-bezier(0.16,1,0.3,1);
}
.usage-bar-fill.low    { background: linear-gradient(90deg, #10B981, #34d399); }
.usage-bar-fill.medium { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
.usage-bar-fill.high   { background: linear-gradient(90deg, #ef4444, #f87171); }

/* Interest tiers mini */
.tier-table {
  width: 100%; margin-top: 1rem; font-size: 0.7rem;
  border-collapse: separate; border-spacing: 0 3px;
}
.tier-table th {
  text-align: left; padding: 0.35rem 0.5rem; font-weight: 600;
  color: var(--text-secondary); letter-spacing: 0.06em;
  font-size: 0.6rem; border-bottom: 1px solid rgba(255,255,255,0.08);
}
.tier-table td {
  padding: 0.35rem 0.5rem; background: rgba(255,255,255,0.03);
}
.tier-table td:first-child { border-radius: 6px 0 0 6px; }
.tier-table td:last-child  { border-radius: 0 6px 6px 0; color: var(--warning); font-weight: 600; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCENE 9: MONTHLY SUMMARY
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.report-mock {
  width: min(600px, 90vw); border-radius: 16px; overflow: hidden;
  box-shadow: 0 25px 60px rgba(0,0,0,0.5);
  background: #f8fafc; color: #1e293b;
}
.report-header {
  background: linear-gradient(135deg, #81D8D0, #5bb8b0);
  padding: 1.25rem 1.5rem; text-align: center; color: white;
}
.report-header .rh-logo { font-size: 1.5rem; margin-bottom: 0.25rem; }
.report-header .rh-title { font-family: 'Noto Sans SC', serif; font-size: 1.2rem; font-weight: 700; }
.report-header .rh-period { font-size: 0.75rem; opacity: 0.85; margin-top: 0.15rem; }

.report-body { padding: 1.25rem 1.5rem; }

.report-overview {
  display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; margin-bottom: 1rem;
}
.report-stat {
  padding: 0.75rem; border-radius: 10px; text-align: center;
}
.report-stat.earned { background: #ecfdf5; }
.report-stat.spent  { background: #fff7ed; }
.report-stat .rs-value { font-family: 'Cinzel', serif; font-size: 1.5rem; font-weight: 700; }
.report-stat .rs-value.green { color: #10B981; }
.report-stat .rs-value.orange { color: #f59e0b; }
.report-stat .rs-label { font-size: 0.65rem; color: #64748b; letter-spacing: 0.06em; margin-top: 0.15rem; }
.report-stat .rs-change {
  display: inline-flex; align-items: center; gap: 0.2rem;
  font-size: 0.65rem; font-weight: 600; margin-top: 0.25rem;
  padding: 0.1rem 0.4rem; border-radius: 999px;
}
.report-stat .rs-change.up   { background: #dcfce7; color: #16a34a; }
.report-stat .rs-change.down { background: #fee2e2; color: #dc2626; }

.report-child-section {
  margin-top: 0.75rem; padding-top: 0.75rem;
  border-top: 1px solid #e2e8f0;
}
.report-child-header {
  display: flex; align-items: center; gap: 0.5rem;
  font-weight: 700; font-size: 0.9rem; margin-bottom: 0.5rem;
}
.report-child-header .rch-avatar {
  width: 24px; height: 24px; border-radius: 50%;
  background: #dbeafe; display: flex; align-items: center;
  justify-content: center; font-size: 0.7rem;
}
.report-child-stats {
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.5rem;
}
.report-cs {
  text-align: center; padding: 0.4rem; border-radius: 8px;
  background: #f1f5f9;
}
.report-cs .rcs-value { font-family: 'Cinzel', serif; font-size: 1rem; font-weight: 700; }
.report-cs .rcs-value.green  { color: #10B981; }
.report-cs .rcs-value.orange { color: #f59e0b; }
.report-cs .rcs-value.teal   { color: #0d9488; }
.report-cs .rcs-label { font-size: 0.55rem; color: #94a3b8; letter-spacing: 0.04em; }

/* Settlement mini section */
.report-settlement {
  margin-top: 0.75rem; padding: 0.75rem;
  border-radius: 10px; background: #fef3c7; border: 1px solid #fde68a;
}
.report-settlement .rs-title {
  font-weight: 700; font-size: 0.75rem; color: #92400e; margin-bottom: 0.5rem;
  display: flex; align-items: center; gap: 0.35rem;
}
.report-settlement-grid {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;
}
.report-settlement-item { text-align: center; }
.report-settlement-item .rsi-value { font-family: 'Cinzel', serif; font-size: 0.9rem; font-weight: 700; }
.report-settlement-item .rsi-value.red { color: #dc2626; }
.report-settlement-item .rsi-value.amber { color: #d97706; }
.report-settlement-item .rsi-value.green { color: #16a34a; }
.report-settlement-item .rsi-label { font-size: 0.55rem; color: #78716c; letter-spacing: 0.04em; }

.report-footer {
  padding: 0.75rem 1.5rem; background: #f1f5f9; text-align: center;
  font-size: 0.65rem; color: #94a3b8;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCENE 10: BILINGUAL
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.lang-morph {
  position: relative; overflow: hidden; min-height: 5rem;
  display: flex; align-items: center; justify-content: center;
}
.lang-morph .lang-text {
  position: absolute; transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1); white-space: nowrap;
}
.lang-morph .lang-text.hidden-up   { opacity: 0; transform: translateY(-30px); }
.lang-morph .lang-text.visible      { opacity: 1; transform: translateY(0); }
.lang-morph .lang-text.hidden-down  { opacity: 0; transform: translateY(30px); }
.lang-flags { display: flex; gap: 2rem; margin-top: 2rem; }
.lang-flag {
  display: flex; align-items: center; gap: 0.75rem;
  padding: 0.75rem 1.5rem; border-radius: 12px;
  background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08);
  font-size: 1.1rem; transition: all 0.3s ease;
}
.lang-flag.active { border-color: rgba(255,215,0,0.3); background: rgba(255,215,0,0.08); }
.lang-flag .flag { font-size: 1.8rem; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCENE 11: CLOSING
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.cta-button {
  display: inline-flex; align-items: center; gap: 0.75rem;
  padding: 1rem 2.5rem; border-radius: 999px;
  background: linear-gradient(135deg, var(--star-gold), var(--star-warm));
  color: var(--night-deep); font-family: 'Noto Sans SC', serif;
  font-weight: 700; font-size: 1.1rem; letter-spacing: 0.04em;
  text-decoration: none; border: none; cursor: pointer;
  transition: all 0.3s ease; box-shadow: 0 0 30px rgba(255,215,0,0.3);
}
.cta-button:hover { transform: translateY(-2px); box-shadow: 0 0 50px rgba(255,215,0,0.5); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROGRESS BAR & CONTROLS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.progress-bar {
  position: fixed; bottom: 0; left: 0; right: 0; z-index: 50;
  padding: 0 2rem 1.5rem; display: flex; align-items: center; gap: 1rem;
}
.progress-track { flex: 1; height: 3px; background: rgba(255,255,255,0.08); border-radius: 999px; overflow: hidden; cursor: pointer; }
.progress-fill { height: 100%; background: linear-gradient(90deg, var(--night-bright), var(--star-gold)); border-radius: 999px; transition: width 0.3s ease; box-shadow: 0 0 8px rgba(255,215,0,0.3); }
.progress-label { font-size: 0.7rem; color: var(--text-secondary); letter-spacing: 0.1em; min-width: 3.5rem; text-align: right; font-variant-numeric: tabular-nums; }

.controls { position: fixed; top: 1.5rem; right: 1.5rem; z-index: 50; display: flex; gap: 0.5rem; }
.ctrl-btn {
  width: 40px; height: 40px; border-radius: 50%;
  border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05);
  backdrop-filter: blur(10px); color: var(--text-secondary); font-size: 1rem;
  cursor: pointer; display: flex; align-items: center; justify-content: center;
  transition: all 0.2s ease;
}
.ctrl-btn:hover { background: rgba(255,255,255,0.1); color: var(--text-primary); }
.ctrl-btn.active { color: var(--star-gold); border-color: rgba(255,215,0,0.3); }

.scene-indicator { position: fixed; top: 1.5rem; left: 1.5rem; z-index: 50; display: flex; gap: 6px; }
.scene-dot {
  width: 6px; height: 6px; border-radius: 50%; background: rgba(255,255,255,0.15);
  transition: all 0.3s ease; cursor: pointer;
}
.scene-dot.active { background: var(--star-gold); box-shadow: 0 0 8px rgba(255,215,0,0.5); transform: scale(1.3); }
.scene-dot:hover { background: rgba(255,255,255,0.4); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHARED ANIMATIONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes floatY { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
@keyframes shimmer { 0% { background-position: -200% center; } 100% { background-position: 200% center; } }
.shimmer-line { height: 2px; background: linear-gradient(90deg, transparent, var(--star-gold), transparent); background-size: 200% 100%; animation: shimmer 3s linear infinite; }

.cat-dot { display: inline-block; width: 8px; height: 8px; border-radius: 50%; margin-right: 0.35rem; vertical-align: middle; }
.cat-dot.health  { background: #ec4899; }
.cat-dot.study   { background: #3b82f6; }
.cat-dot.chores  { background: #10b981; }
.cat-dot.social  { background: #8b5cf6; }
.cat-dot.music   { background: #f59e0b; }
.cat-dot.reading { background: #06b6d4; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width: 768px) {
  .quest-grid { grid-template-columns: 1fr; gap: 1rem; }
  .quest-card { padding: 1.5rem 1rem; }
  .dash-body  { grid-template-columns: 1fr; }
  .quest-board { grid-template-columns: 1fr; }
  .rewards-showcase { gap: 1rem; }
  .reward-item { min-width: 100px; padding: 1rem; }
  .multiplier-row { flex-wrap: wrap; justify-content: center; }
  .cal-layout { flex-direction: column; }
  .credit-layout { flex-direction: column; align-items: center; }
  .credit-card { max-width: 100%; }
  .report-child-stats { grid-template-columns: repeat(2, 1fr); }
}
</style>
</head>
<body>

<canvas id="starfield"></canvas>
<div class="nebula"></div>

<div class="scene-indicator" id="sceneIndicator"></div>

<div class="controls">
  <button class="ctrl-btn" id="btnPrev" title="ä¸Šä¸€é¡µ">â—‚</button>
  <button class="ctrl-btn active" id="btnPlayPause" title="æ’­æ”¾/æš‚åœ">âšâš</button>
  <button class="ctrl-btn" id="btnNext" title="ä¸‹ä¸€é¡µ">â–¸</button>
  <button class="ctrl-btn" id="btnRestart" title="é‡æ–°å¼€å§‹">â†»</button>
</div>

<!-- â•â•â•â•â•â•â• SCENE 0: COLD OPEN â•â•â•â•â•â•â• -->
<section class="scene" id="scene-0">
  <div class="reveal" style="animation: revealScale 1.2s cubic-bezier(0.16,1,0.3,1) both;">
    <span class="logo-star">â­</span>
  </div>
  <h1 class="font-display text-hero text-gold reveal reveal-d2" style="margin-top: 1rem;">å¤ºæ˜Ÿå¤§é—¯å…³</h1>
  <div class="reveal reveal-d3" style="margin-top: 1.5rem;">
    <span class="brand-badge">é²¸å¾‹ &nbsp;|&nbsp; Beluga Tempo</span>
  </div>
</section>

<!-- â•â•â•â•â•â•â• SCENE 1: TAGLINE â•â•â•â•â•â•â• -->
<section class="scene" id="scene-1">
  <p class="text-label reveal" style="color: var(--star-gold);">å®¶åº­æ¸¸æˆåŒ–å¹³å°</p>
  <div class="tagline-divider reveal reveal-d1"></div>
  <h2 class="font-cn text-title reveal reveal-d2" style="max-width: 700px; text-align: center;">
    é—¯å…³å¤ºæ˜Ÿã€‚<br>ç§¯ç´¯æˆé•¿ã€‚<br>è§£é”å¥–åŠ±ã€‚
  </h2>
  <div class="tagline-divider reveal reveal-d3"></div>
  <p class="font-en text-subtitle reveal reveal-d4" style="color: var(--text-secondary); text-align: center;">Complete quests. Earn stars. Unlock rewards.</p>
</section>

<!-- â•â•â•â•â•â•â• SCENE 2: QUEST TYPES â•â•â•â•â•â•â• -->
<section class="scene" id="scene-2">
  <p class="text-label reveal" style="color: var(--text-secondary); margin-bottom: 0.5rem;">ä»»åŠ¡ç³»ç»Ÿ</p>
  <h2 class="font-cn text-title reveal reveal-d1" style="margin-bottom: 2rem;">æˆé•¿çš„ä¸‰ä¸ªç»´åº¦</h2>
  <div class="quest-grid">
    <div class="quest-card glass bonus reveal reveal-d2" style="animation-name: revealLeft;">
      <span class="icon">â­</span>
      <div class="card-title" style="color: var(--star-gold);">é¢å¤–ä»»åŠ¡</div>
      <div class="card-desc">è¶…è¶Šè‡ªæˆ‘ï¼Œä¸»åŠ¨å®Œæˆé¢å¤–ä»»åŠ¡ï¼Œç”¨åŠªåŠ›å’Œç§¯ææ€§èµ¢å¾—æ›´å¤šæ˜Ÿæ˜Ÿã€‚</div>
    </div>
    <div class="quest-card glass duty reveal reveal-d3" style="animation-name: revealUp;">
      <span class="icon">ğŸ“‹</span>
      <div class="card-title" style="color: var(--warning);">æ—¥å¸¸èŒè´£</div>
      <div class="card-desc">æ¯æ—¥å¿…åšçš„åŸºæœ¬è´£ä»»ã€‚æ²¡æœ‰å®Œæˆä¼šæ‰£æ˜Ÿæ˜Ÿï¼ŒåŸ¹å…»è‡ªå¾‹å¥½ä¹ æƒ¯ã€‚</div>
    </div>
    <div class="quest-card glass violation reveal reveal-d4" style="animation-name: revealRight;">
      <span class="icon">âš ï¸</span>
      <div class="card-title" style="color: var(--danger);">è¿è§„è¡Œä¸º</div>
      <div class="card-desc">è¿åè§„åˆ™çš„åæœã€‚é€šè¿‡æ‰£æ˜Ÿå­¦ä¼šæ‰¿æ‹…è´£ä»»ã€‚</div>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â• SCENE 3: STAR EARNING â•â•â•â•â•â•â• -->
<section class="scene" id="scene-3">
  <p class="text-label reveal" style="color: var(--text-secondary); margin-bottom: 0.5rem;">æ˜Ÿæ˜Ÿç»æµ</p>
  <h2 class="font-cn text-title reveal reveal-d1" style="margin-bottom: 2rem;">æ¯é¢—æ˜Ÿéƒ½å¾ˆé‡è¦</h2>
  <div class="star-counter reveal reveal-d2">
    <span class="star-icon">â­</span>
    <span class="count text-gold" id="starCount">0</span>
  </div>
  <div class="multiplier-row reveal reveal-d3">
    <div class="multiplier-badge" data-mult="1">1Ã—</div>
    <div class="multiplier-badge" data-mult="2">2Ã—</div>
    <div class="multiplier-badge" data-mult="3">3Ã—</div>
    <div class="multiplier-badge" data-mult="5">5Ã—</div>
    <div class="multiplier-badge" data-mult="10">10Ã—</div>
  </div>
  <p class="text-subtitle reveal reveal-d4" style="color: var(--text-secondary); margin-top: 1.5rem;">
    æ˜Ÿæ˜Ÿå€æ•° â€” å¥–åŠ±æ°å‡ºè¡¨ç°ï¼Œæœ€é«˜å¯è¾¾10å€
  </p>
</section>

<!-- â•â•â•â•â•â•â• SCENE 4: PARENT DASHBOARD â•â•â•â•â•â•â• -->
<section class="scene" id="scene-4">
  <p class="text-label reveal" style="color: var(--text-secondary); margin-bottom: 0.5rem;">å®¶é•¿è§†è§’</p>
  <h2 class="font-cn text-title reveal reveal-d1" style="margin-bottom: 2rem;">ç®¡ç†ä¸­å¿ƒ</h2>
  <div class="dashboard-mock glass-strong reveal reveal-d2">
    <div class="dash-header">
      <div class="logo-sm"><span>â­</span> å¤ºæ˜Ÿå¤§é—¯å…³</div>
      <div class="nav-dots">
        <div class="nav-dot active"></div><div class="nav-dot"></div><div class="nav-dot"></div><div class="nav-dot"></div>
      </div>
    </div>
    <div class="dash-body">
      <div class="dash-stat reveal reveal-d3">
        <div class="stat-icon">ğŸ“Š</div>
        <div class="stat-label">ä»Šæ—¥è·å¾—æ˜Ÿæ˜Ÿ</div>
        <div class="stat-value gold" id="dashStars">0</div>
      </div>
      <div class="dash-stat reveal reveal-d4">
        <div class="stat-icon">âœ…</div>
        <div class="stat-label">å¾…å®¡æ‰¹</div>
        <div class="stat-value blue">3</div>
      </div>
      <div class="dash-stat reveal reveal-d5">
        <div class="stat-icon">ğŸ¯</div>
        <div class="stat-label">å·²å®Œæˆä»»åŠ¡</div>
        <div class="stat-value green" id="dashQuests">0</div>
      </div>
      <div class="dash-stat reveal reveal-d6">
        <div class="stat-icon">ğŸ†</div>
        <div class="stat-label">å½“å‰ç­‰çº§</div>
        <div class="stat-value purple">3çº§</div>
      </div>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â• SCENE 5: CHILD QUEST BOARD â•â•â•â•â•â•â• -->
<section class="scene" id="scene-5">
  <p class="text-label reveal" style="color: var(--text-secondary); margin-bottom: 0.5rem;">å­©å­è§†è§’</p>
  <h2 class="font-cn text-title reveal reveal-d1" style="margin-bottom: 2rem;">ä»»åŠ¡çœ‹æ¿</h2>
  <div class="quest-board">
    <div class="board-quest reveal reveal-d2" id="bq-1">
      <span class="q-icon">ğŸ“š</span>
      <div class="q-info"><div class="q-name">é˜…è¯»30åˆ†é’Ÿ</div><div class="q-cat"><span class="cat-dot reading"></span>é˜…è¯»</div></div>
      <div class="q-stars">+3 â­</div>
    </div>
    <div class="board-quest reveal reveal-d3" id="bq-2">
      <span class="q-icon">ğŸµ</span>
      <div class="q-info"><div class="q-name">ç»ƒä¹ é’¢ç´</div><div class="q-cat"><span class="cat-dot music"></span>éŸ³ä¹</div></div>
      <div class="q-stars">+2 â­</div>
    </div>
    <div class="board-quest reveal reveal-d4" id="bq-3">
      <span class="q-icon">ğŸ’ª</span>
      <div class="q-info"><div class="q-name">è¿åŠ¨20åˆ†é’Ÿ</div><div class="q-cat"><span class="cat-dot health"></span>å¥åº·</div></div>
      <div class="q-stars">+2 â­</div>
    </div>
    <div class="board-quest reveal reveal-d5" id="bq-4">
      <span class="q-icon">ğŸ¤</span>
      <div class="q-info"><div class="q-name">å¸®åŠ©åŒå­¦</div><div class="q-cat"><span class="cat-dot social"></span>ç¤¾äº¤</div></div>
      <div class="q-stars">+4 â­</div>
    </div>
    <div class="board-quest reveal reveal-d6" id="bq-5">
      <span class="q-icon">ğŸ§¹</span>
      <div class="q-info"><div class="q-name">æ‰“æ‰«æˆ¿é—´</div><div class="q-cat"><span class="cat-dot chores"></span>å®¶åŠ¡</div></div>
      <div class="q-stars">+2 â­</div>
    </div>
    <div class="board-quest reveal reveal-d7" id="bq-6">
      <span class="q-icon">âœï¸</span>
      <div class="q-info"><div class="q-name">èƒŒè¯µå•è¯</div><div class="q-cat"><span class="cat-dot study"></span>å­¦ä¹ </div></div>
      <div class="q-stars">+3 â­</div>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â• SCENE 6: REWARDS â•â•â•â•â•â•â• -->
<section class="scene" id="scene-6">
  <p class="text-label reveal" style="color: var(--text-secondary); margin-bottom: 0.5rem;">å¥–åŠ±å•†åŸ</p>
  <h2 class="font-cn text-title reveal reveal-d1" style="margin-bottom: 2rem;">æ˜Ÿæ˜Ÿ â†’ å¥–åŠ±</h2>
  <div class="rewards-showcase">
    <div class="reward-item reveal reveal-d2" id="rw-1"><span class="r-icon">ğŸ®</span><div class="r-name">30åˆ†é’Ÿ<br>å±å¹•æ—¶é—´</div><div class="r-cost">15 â­</div></div>
    <div class="reward-item reveal reveal-d3" id="rw-2"><span class="r-icon">ğŸ¦</span><div class="r-name">å†°æ·‡æ·‹<br>å¥–åŠ±</div><div class="r-cost">20 â­</div></div>
    <div class="reward-item reveal reveal-d4" id="rw-3"><span class="r-icon">ğŸª</span><div class="r-name">å®¶åº­<br>æ´»åŠ¨</div><div class="r-cost">50 â­</div></div>
    <div class="reward-item reveal reveal-d5" id="rw-4"><span class="r-icon">ğŸ§¸</span><div class="r-name">æ–°<br>ç©å…·</div><div class="r-cost">100 â­</div></div>
    <div class="reward-item reveal reveal-d6" id="rw-5"><span class="r-icon">ğŸ¢</span><div class="r-name">ä¸»é¢˜<br>ä¹å›­æ¸¸</div><div class="r-cost">200 â­</div></div>
  </div>
</section>

<!-- â•â•â•â•â•â•â• SCENE 7: CALENDAR VIEW â•â•â•â•â•â•â• -->
<section class="scene" id="scene-7">
  <p class="text-label reveal" style="color: var(--text-secondary); margin-bottom: 0.5rem;">æ´»åŠ¨è®°å½•</p>
  <h2 class="font-cn text-title reveal reveal-d1" style="margin-bottom: 1.5rem;">æ—¥å†è§†å›¾</h2>
  <div class="cal-layout reveal reveal-d2">
    <div class="calendar-mock" id="calendarMock">
      <div class="cal-nav">
        <button class="cal-btn">â—‚</button>
        <span class="cal-month">2026å¹´2æœˆ</span>
        <button class="cal-today-btn">ä»Šå¤©</button>
        <button class="cal-btn">â–¸</button>
      </div>
      <div class="cal-weekdays">
        <span>æ—¥</span><span>ä¸€</span><span>äºŒ</span><span>ä¸‰</span><span>å››</span><span>äº”</span><span>å…­</span>
      </div>
      <div class="cal-grid" id="calGrid">
        <!-- Row 1: Feb starts on Sunday -->
        <div class="cal-day" data-day="1"><span class="day-num">1</span><div class="day-dots"><span class="day-dot positive"></span></div><span class="day-stars pos">+5</span></div>
        <div class="cal-day" data-day="2"><span class="day-num">2</span><div class="day-dots"><span class="day-dot positive"></span><span class="day-dot negative"></span></div><span class="day-stars pos">+2</span></div>
        <div class="cal-day" data-day="3"><span class="day-num">3</span><div class="day-dots"><span class="day-dot positive"></span></div><span class="day-stars pos">+8</span></div>
        <div class="cal-day" data-day="4"><span class="day-num">4</span><div class="day-dots"><span class="day-dot negative"></span></div><span class="day-stars neg">âˆ’3</span></div>
        <div class="cal-day" data-day="5"><span class="day-num">5</span><div class="day-dots"><span class="day-dot positive"></span></div><span class="day-stars pos">+6</span></div>
        <div class="cal-day" data-day="6"><span class="day-num">6</span><div class="day-dots"><span class="day-dot positive"></span><span class="day-dot negative"></span></div><span class="day-stars pos">+1</span></div>
        <div class="cal-day" data-day="7"><span class="day-num">7</span><div class="day-dots"><span class="day-dot positive"></span></div><span class="day-stars pos">+4</span></div>
        <!-- Row 2 -->
        <div class="cal-day" data-day="8"><span class="day-num">8</span><div class="day-dots"><span class="day-dot positive"></span></div><span class="day-stars pos">+7</span></div>
        <div class="cal-day today" data-day="9"><span class="day-num">9</span><div class="day-dots"><span class="day-dot positive"></span></div><span class="day-stars pos">+3</span></div>
        <div class="cal-day selected" data-day="10"><span class="day-num">10</span><div class="day-dots"><span class="day-dot positive"></span><span class="day-dot negative"></span></div><span class="day-stars pos">+5</span></div>
        <div class="cal-day" data-day="11"><span class="day-num">11</span></div>
        <div class="cal-day" data-day="12"><span class="day-num">12</span></div>
        <div class="cal-day" data-day="13"><span class="day-num">13</span></div>
        <div class="cal-day" data-day="14"><span class="day-num">14</span></div>
        <!-- Row 3 -->
        <div class="cal-day" data-day="15"><span class="day-num">15</span></div>
        <div class="cal-day" data-day="16"><span class="day-num">16</span></div>
        <div class="cal-day" data-day="17"><span class="day-num">17</span></div>
        <div class="cal-day" data-day="18"><span class="day-num">18</span></div>
        <div class="cal-day" data-day="19"><span class="day-num">19</span></div>
        <div class="cal-day" data-day="20"><span class="day-num">20</span></div>
        <div class="cal-day" data-day="21"><span class="day-num">21</span></div>
        <!-- Row 4 -->
        <div class="cal-day" data-day="22"><span class="day-num">22</span></div>
        <div class="cal-day" data-day="23"><span class="day-num">23</span></div>
        <div class="cal-day" data-day="24"><span class="day-num">24</span></div>
        <div class="cal-day" data-day="25"><span class="day-num">25</span></div>
        <div class="cal-day" data-day="26"><span class="day-num">26</span></div>
        <div class="cal-day" data-day="27"><span class="day-num">27</span></div>
        <div class="cal-day" data-day="28"><span class="day-num">28</span></div>
      </div>
      <div class="cal-legend">
        <div class="cal-legend-item"><div class="cal-legend-box" style="border: 2px solid var(--star-warm); background: rgba(251,191,36,0.12);"></div>ä»Šå¤©</div>
        <div class="cal-legend-item"><div class="cal-legend-box" style="border: 2px solid var(--star-gold); background: rgba(255,215,0,0.15); box-shadow: 0 0 6px rgba(255,215,0,0.3);"></div>å·²é€‰</div>
        <div class="cal-legend-item"><div class="day-dot positive" style="width:8px;height:8px;"></div>æ­£å‘</div>
        <div class="cal-legend-item"><div class="day-dot negative" style="width:8px;height:8px;"></div>è´Ÿå‘</div>
      </div>
    </div>
    <div class="cal-sidebar reveal reveal-d4">
      <div class="cal-date-header">2026å¹´2æœˆ10æ—¥ â€” æ‰€é€‰æ—¥æœŸ</div>
      <div class="cal-activity-item" id="ca-1">
        <span class="cai-icon">ğŸ“š</span>
        <div class="cai-info"><div class="cai-name">é˜…è¯»30åˆ†é’Ÿ</div><div class="cai-time">ä¸Šåˆ 9:15</div></div>
        <div class="cai-stars pos">+3</div>
      </div>
      <div class="cal-activity-item" id="ca-2">
        <span class="cai-icon">ğŸ’ª</span>
        <div class="cai-info"><div class="cai-name">è¿åŠ¨20åˆ†é’Ÿ</div><div class="cai-time">ä¸‹åˆ 2:30</div></div>
        <div class="cai-stars pos">+2</div>
      </div>
      <div class="cal-activity-item" id="ca-3">
        <span class="cai-icon">ğŸ“‹</span>
        <div class="cai-info"><div class="cai-name">æœªå®Œæˆä½œä¸š</div><div class="cai-time">æ™šä¸Š 8:00</div></div>
        <div class="cai-stars neg">âˆ’2</div>
      </div>
      <div class="cal-activity-item" id="ca-4">
        <span class="cai-icon">ğŸ¤</span>
        <div class="cai-info"><div class="cai-name">å¸®å¿™åšæ™šé¥­</div><div class="cai-time">ä¸‹åˆ 6:45</div></div>
        <div class="cai-stars pos">+2</div>
      </div>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â• SCENE 8: CREDIT SYSTEM â•â•â•â•â•â•â• -->
<section class="scene" id="scene-8">
  <p class="text-label reveal" style="color: var(--text-secondary); margin-bottom: 0.5rem;">ä¿¡ç”¨ç³»ç»Ÿ</p>
  <h2 class="font-cn text-title reveal reveal-d1" style="margin-bottom: 0.5rem;">å…ˆå€Ÿåè¿˜ï¼Œå­¦ä¼šç†è´¢</h2>
  <p class="text-subtitle reveal reveal-d2" style="color: var(--text-secondary); margin-bottom: 2rem; text-align: center; max-width: 550px;">
    å­©å­å¯ä»¥å€Ÿæ˜Ÿæ˜Ÿå¹¶æ”¯ä»˜åˆ©æ¯ â€” åœ¨æ¸¸æˆä¸­å­¦ä¹ çœŸå®çš„é‡‘èæ¦‚å¿µã€‚
  </p>
  <div class="credit-layout">
    <!-- Emma: healthy credit -->
    <div class="credit-card glass enabled reveal reveal-d3" style="animation-name: revealLeft;">
      <div class="cc-avatar">ğŸ‘§</div>
      <div class="cc-name">å°ç¾</div>
      <span class="cc-badge on">ä¿¡ç”¨å·²å¼€é€š</span>
      <div class="credit-stats">
        <div class="cs-item"><div class="cs-label">ä½™é¢</div><div class="cs-value green">48 â­</div></div>
        <div class="cs-item"><div class="cs-label">ä¿¡ç”¨é¢åº¦</div><div class="cs-value purple">100 â­</div></div>
        <div class="cs-item"><div class="cs-label">æ¬ æ¬¾</div><div class="cs-value" style="color: var(--text-secondary);">0 â­</div></div>
        <div class="cs-item"><div class="cs-label">å¯ç”¨æ˜Ÿæ˜Ÿ</div><div class="cs-value gold">148 â­</div></div>
      </div>
      <div class="usage-bar-wrap">
        <div class="usage-bar-label"><span>ä¿¡ç”¨ä½¿ç”¨ç‡</span><span>0%</span></div>
        <div class="usage-bar"><div class="usage-bar-fill low" id="usage-emma" style="width: 0%;"></div></div>
      </div>
    </div>
    <!-- Lucas: in debt -->
    <div class="credit-card glass debt reveal reveal-d4" style="animation-name: revealRight;">
      <div class="cc-avatar">ğŸ‘¦</div>
      <div class="cc-name">å°æ˜</div>
      <span class="cc-badge warn">æœ‰æ¬ æ¬¾</span>
      <div class="credit-stats">
        <div class="cs-item"><div class="cs-label">ä½™é¢</div><div class="cs-value red">âˆ’45 â­</div></div>
        <div class="cs-item"><div class="cs-label">ä¿¡ç”¨é¢åº¦</div><div class="cs-value purple">80 â­</div></div>
        <div class="cs-item"><div class="cs-label">æ¬ æ¬¾</div><div class="cs-value red">45 â­</div></div>
        <div class="cs-item"><div class="cs-label">å¯ç”¨é¢åº¦</div><div class="cs-value" style="color: var(--text-secondary);">35 â­</div></div>
      </div>
      <div class="usage-bar-wrap">
        <div class="usage-bar-label"><span>ä¿¡ç”¨ä½¿ç”¨ç‡</span><span id="lucas-pct">0%</span></div>
        <div class="usage-bar"><div class="usage-bar-fill high" id="usage-lucas" style="width: 0%;"></div></div>
      </div>
      <table class="tier-table reveal reveal-d5">
        <thead><tr><th>æ¡£ä½</th><th>æ¬ æ¬¾èŒƒå›´</th><th>åˆ©ç‡</th></tr></thead>
        <tbody>
          <tr><td>1</td><td>0 â€“ 19 â­</td><td>5%</td></tr>
          <tr><td>2</td><td>20 â€“ 49 â­</td><td>10%</td></tr>
          <tr><td>3</td><td>50+ â­</td><td>15%</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â• SCENE 9: MONTHLY SUMMARY â•â•â•â•â•â•â• -->
<section class="scene" id="scene-9">
  <p class="text-label reveal" style="color: var(--text-secondary); margin-bottom: 0.5rem;">è‡ªåŠ¨æŠ¥å‘Š</p>
  <h2 class="font-cn text-title reveal reveal-d1" style="margin-bottom: 1.5rem;">æœˆåº¦æ€»ç»“</h2>
  <div class="report-mock reveal reveal-d2">
    <div class="report-header">
      <div class="rh-logo">â­ å¤ºæ˜Ÿå¤§é—¯å…³</div>
      <div class="rh-title">æœˆåº¦æ˜Ÿæ˜Ÿæ€»ç»“</div>
      <div class="rh-period">2026å¹´1æœˆ</div>
    </div>
    <div class="report-body">
      <div class="report-overview">
        <div class="report-stat earned">
          <div class="rs-value green" id="reportEarned">0</div>
          <div class="rs-label">è·å¾—æ˜Ÿæ˜Ÿ</div>
          <div class="rs-change up">â–² 12%</div>
        </div>
        <div class="report-stat spent">
          <div class="rs-value orange" id="reportSpent">0</div>
          <div class="rs-label">èŠ±è´¹æ˜Ÿæ˜Ÿ</div>
          <div class="rs-change down">â–¼ 8%</div>
        </div>
      </div>

      <!-- Emma -->
      <div class="report-child-section">
        <div class="report-child-header"><div class="rch-avatar">ğŸ‘§</div> å°ç¾</div>
        <div class="report-child-stats">
          <div class="report-cs"><div class="rcs-value green" id="repEmmaEarn">0</div><div class="rcs-label">è·å¾—</div></div>
          <div class="report-cs"><div class="rcs-value orange" id="repEmmaSpent">0</div><div class="rcs-label">èŠ±è´¹</div></div>
          <div class="report-cs"><div class="rcs-value green" id="repEmmaNet">0</div><div class="rcs-label">å‡€å€¼</div></div>
          <div class="report-cs"><div class="rcs-value teal" id="repEmmaBalance">0</div><div class="rcs-label">ä½™é¢</div></div>
        </div>
      </div>

      <!-- Lucas -->
      <div class="report-child-section">
        <div class="report-child-header"><div class="rch-avatar">ğŸ‘¦</div> å°æ˜</div>
        <div class="report-child-stats">
          <div class="report-cs"><div class="rcs-value green" id="repLucasEarn">0</div><div class="rcs-label">è·å¾—</div></div>
          <div class="report-cs"><div class="rcs-value orange" id="repLucasSpent">0</div><div class="rcs-label">èŠ±è´¹</div></div>
          <div class="report-cs"><div class="rcs-value green" id="repLucasNet">0</div><div class="rcs-label">å‡€å€¼</div></div>
          <div class="report-cs"><div class="rcs-value teal" id="repLucasBalance">0</div><div class="rcs-label">ä½™é¢</div></div>
        </div>
      </div>

      <!-- Settlement -->
      <div class="report-settlement reveal reveal-d5">
        <div class="rs-title">ğŸ’³ ä¿¡ç”¨ç»“ç®— â€” å°æ˜</div>
        <div class="report-settlement-grid">
          <div class="report-settlement-item"><div class="rsi-value red">45 â­</div><div class="rsi-label">æ¬ æ¬¾</div></div>
          <div class="report-settlement-item"><div class="rsi-value amber">+3.5 â­</div><div class="rsi-label">åˆ©æ¯</div></div>
          <div class="report-settlement-item"><div class="rsi-value green">80 â†’ 75</div><div class="rsi-label">é¢åº¦è°ƒæ•´</div></div>
        </div>
      </div>
    </div>
    <div class="report-footer">æ¯æœˆè‡ªåŠ¨å‘é€ â€” å¤ºæ˜Ÿå¤§é—¯å…³ by é²¸å¾‹</div>
  </div>
</section>

<!-- â•â•â•â•â•â•â• SCENE 10: BILINGUAL â•â•â•â•â•â•â• -->
<section class="scene" id="scene-10">
  <p class="text-label reveal" style="color: var(--text-secondary); margin-bottom: 0.5rem;">åŒè¯­æ”¯æŒ</p>
  <h2 class="font-cn text-title reveal reveal-d1" style="margin-bottom: 2rem;">ä¸¤ç§è¯­è¨€ï¼Œä¸€ä¸ªå®¶åº­</h2>
  <div class="lang-morph reveal reveal-d2" style="min-height: 4rem;">
    <span class="font-cn text-title lang-text visible" id="langCN" style="color: var(--star-gold);">é—¯å…³å¤ºæ˜Ÿï¼Œè§£é”å¥–åŠ±ã€‚</span>
    <span class="font-en text-title lang-text hidden-down" id="langEN" style="color: var(--star-gold);">Complete quests. Earn stars.</span>
  </div>
  <div class="lang-flags reveal reveal-d3">
    <div class="lang-flag active" id="flagCN"><span class="flag">ğŸ‡¨ğŸ‡³</span><span>ä¸­æ–‡</span></div>
    <div class="lang-flag" id="flagEN"><span class="flag">ğŸ‡ºğŸ‡¸</span><span>English</span></div>
  </div>
  <p class="text-subtitle reveal reveal-d4" style="color: var(--text-secondary); margin-top: 2rem; text-align: center; max-width: 500px;">
    å®Œæ•´çš„ä¸­è‹±åŒè¯­æœ¬åœ°åŒ– â€” æ¯ä¸ªä»»åŠ¡ã€å¥–åŠ±å’Œç•Œé¢å…ƒç´ éƒ½èƒ½æ— ç¼åˆ‡æ¢ã€‚
  </p>
</section>

<!-- â•â•â•â•â•â•â• SCENE 11: CLOSING â•â•â•â•â•â•â• -->
<section class="scene" id="scene-11">
  <div class="reveal" style="animation: revealScale 1s cubic-bezier(0.16,1,0.3,1) both;">
    <span style="font-size: 4rem; filter: drop-shadow(0 0 20px rgba(255,215,0,0.5));">â­</span>
  </div>
  <h2 class="font-display text-hero text-gold reveal reveal-d1" style="font-size: clamp(2.5rem, 6vw, 5rem); text-align: center;">å¤ºæ˜Ÿå¤§é—¯å…³</h2>
  <p class="text-subtitle reveal reveal-d2" style="color: var(--text-secondary); margin: 1.5rem 0; text-align: center; max-width: 500px;">
    æŠŠæ—¥å¸¸ä»»åŠ¡å˜æˆå†’é™©ä¹‹æ—…ã€‚<br>ä»¥æ¸¸æˆé©±åŠ¨æˆé•¿ã€‚
  </p>
  <div class="shimmer-line reveal reveal-d3" style="width: 120px; margin: 1.5rem auto;"></div>
  <div class="reveal reveal-d4" style="margin-top: 0.5rem;">
    <a class="cta-button" href="https://starquest-kappa.vercel.app" target="_blank"><span>â­</span> ä½“éªŒå¤ºæ˜Ÿå¤§é—¯å…³</a>
  </div>
  <div class="reveal reveal-d5" style="margin-top: 2rem;">
    <span class="brand-badge">é²¸å¾‹ &nbsp;|&nbsp; Beluga Tempo</span>
  </div>
</section>

<!-- Progress Bar -->
<div class="progress-bar">
  <div class="progress-track" id="progressTrack">
    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
  </div>
  <span class="progress-label" id="progressLabel">0 / 12</span>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STARFIELD RENDERER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const canvas = document.getElementById('starfield');
const ctx = canvas.getContext('2d');
let stars = [];
let W, H;

function resizeCanvas() { W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; }

function initStars(count = 300) {
  stars = [];
  for (let i = 0; i < count; i++) {
    stars.push({
      x: Math.random() * W, y: Math.random() * H,
      r: Math.random() * 1.8 + 0.2, alpha: Math.random() * 0.8 + 0.2,
      speed: Math.random() * 0.3 + 0.05,
      twinkleSpeed: Math.random() * 0.02 + 0.005,
      twinkleOffset: Math.random() * Math.PI * 2,
      color: ['#FFD700','#FEF08A','#FBBF24','#e0e7ff','#c7d2fe','#ffffff'][Math.floor(Math.random()*6)]
    });
  }
}

function drawStars(time) {
  ctx.clearRect(0, 0, W, H);
  for (const s of stars) {
    const twinkle = Math.sin(time * s.twinkleSpeed + s.twinkleOffset) * 0.3 + 0.7;
    ctx.beginPath(); ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
    ctx.fillStyle = s.color; ctx.globalAlpha = s.alpha * twinkle; ctx.fill();
    if (s.r > 1.2) {
      ctx.beginPath(); ctx.arc(s.x, s.y, s.r * 3, 0, Math.PI * 2);
      ctx.fillStyle = s.color; ctx.globalAlpha = s.alpha * twinkle * 0.1; ctx.fill();
    }
  }
  ctx.globalAlpha = 1;
}

function animateStars(time) {
  drawStars(time);
  for (const s of stars) { s.y -= s.speed; if (s.y < -5) { s.y = H + 5; s.x = Math.random() * W; } }
  requestAnimationFrame(animateStars);
}

window.addEventListener('resize', () => { resizeCanvas(); initStars(); });
resizeCanvas(); initStars(); requestAnimationFrame(animateStars);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCENE MANAGER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const TOTAL_SCENES = 12;
const SCENE_DURATIONS = [4000, 5000, 6000, 6500, 6500, 7000, 6500, 7500, 7500, 8000, 6000, 8000];
let currentScene = -1;
let isPlaying = true;
let sceneTimer = null;

const scenes = [];
for (let i = 0; i < TOTAL_SCENES; i++) scenes.push(document.getElementById(`scene-${i}`));

const indicator = document.getElementById('sceneIndicator');
for (let i = 0; i < TOTAL_SCENES; i++) {
  const dot = document.createElement('div');
  dot.className = 'scene-dot';
  dot.addEventListener('click', () => goToScene(i));
  indicator.appendChild(dot);
}

function updateIndicators() {
  indicator.querySelectorAll('.scene-dot').forEach((d, i) => d.classList.toggle('active', i === currentScene));
}

function updateProgress() {
  document.getElementById('progressFill').style.width = ((currentScene + 1) / TOTAL_SCENES * 100) + '%';
  document.getElementById('progressLabel').textContent = `${currentScene + 1} / ${TOTAL_SCENES}`;
}

function goToScene(index) {
  if (index < 0 || index >= TOTAL_SCENES || index === currentScene) return;
  clearTimeout(sceneTimer);
  if (currentScene >= 0) scenes[currentScene].classList.remove('active');
  currentScene = index;
  scenes[currentScene].classList.add('active');
  updateIndicators(); updateProgress();
  runSceneAnimation(currentScene);
  if (isPlaying) scheduleNext();
}

function scheduleNext() {
  clearTimeout(sceneTimer);
  if (currentScene < TOTAL_SCENES - 1)
    sceneTimer = setTimeout(() => goToScene(currentScene + 1), SCENE_DURATIONS[currentScene]);
}

function nextScene() { if (currentScene < TOTAL_SCENES - 1) goToScene(currentScene + 1); }
function prevScene() { if (currentScene > 0) goToScene(currentScene - 1); }

function togglePlay() {
  isPlaying = !isPlaying;
  const btn = document.getElementById('btnPlayPause');
  btn.textContent = isPlaying ? 'âšâš' : 'â–¶';
  btn.classList.toggle('active', isPlaying);
  if (isPlaying) scheduleNext(); else clearTimeout(sceneTimer);
}

function restart() {
  clearTimeout(sceneTimer);
  if (currentScene >= 0) scenes[currentScene].classList.remove('active');
  currentScene = -1; isPlaying = true;
  document.getElementById('btnPlayPause').textContent = 'âšâš';
  document.getElementById('btnPlayPause').classList.add('active');
  goToScene(0);
}

document.getElementById('btnNext').addEventListener('click', nextScene);
document.getElementById('btnPrev').addEventListener('click', prevScene);
document.getElementById('btnPlayPause').addEventListener('click', togglePlay);
document.getElementById('btnRestart').addEventListener('click', restart);

document.getElementById('progressTrack').addEventListener('click', (e) => {
  const rect = e.currentTarget.getBoundingClientRect();
  const pct = (e.clientX - rect.left) / rect.width;
  goToScene(Math.max(0, Math.min(TOTAL_SCENES - 1, Math.floor(pct * TOTAL_SCENES))));
});

document.addEventListener('keydown', (e) => {
  if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); nextScene(); }
  if (e.key === 'ArrowLeft') { e.preventDefault(); prevScene(); }
  if (e.key === 'p' || e.key === 'P') togglePlay();
  if (e.key === 'r' || e.key === 'R') restart();
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCENE-SPECIFIC ANIMATIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function runSceneAnimation(index) {
  switch (index) {
    case 3: animateStarCounter(); break;
    case 4: animateDashboard(); break;
    case 5: animateQuestCompletion(); break;
    case 6: animateRewardRedeem(); break;
    case 7: animateCalendar(); break;
    case 8: animateCredit(); break;
    case 9: animateReport(); break;
    case 10: animateLangSwitch(); break;
  }
}

function animateNumber(el, from, to, duration, cb) {
  const start = performance.now();
  function tick(now) {
    const t = Math.min((now - start) / duration, 1);
    const ease = 1 - Math.pow(1 - t, 3);
    el.textContent = Math.round(from + (to - from) * ease);
    if (t < 1) requestAnimationFrame(tick); else if (cb) cb();
  }
  requestAnimationFrame(tick);
}

// Scene 3: Star counter + multiplier
function animateStarCounter() {
  const el = document.getElementById('starCount');
  const badges = document.querySelectorAll('.multiplier-badge');
  let count = 0, step = 0;
  const targets = [3, 6, 9, 14, 24];
  badges.forEach(b => b.classList.remove('active'));
  function tickMultiplier() {
    if (step >= 5) return;
    badges[step].classList.add('active');
    if (step > 0) badges[step - 1].classList.remove('active');
    animateNumber(el, count, targets[step], step === 4 ? 800 : 500, () => {
      count = targets[step]; step++;
      if (step < 5) setTimeout(tickMultiplier, 400);
    });
  }
  setTimeout(tickMultiplier, 800);
}

// Scene 4: Dashboard counters
function animateDashboard() {
  setTimeout(() => {
    animateNumber(document.getElementById('dashStars'), 0, 47, 1200);
    animateNumber(document.getElementById('dashQuests'), 0, 12, 1200);
  }, 1000);
}

// Scene 5: Quest completion
function animateQuestCompletion() {
  ['bq-1', 'bq-3', 'bq-5'].forEach((id, i) => {
    setTimeout(() => {
      const el = document.getElementById(id);
      if (el) { el.classList.add('completing'); spawnStarBurst(el); }
    }, 2000 + i * 800);
  });
  setTimeout(() => {
    ['bq-1','bq-3','bq-5'].forEach(id => {
      const el = document.getElementById(id);
      if (el) el.classList.remove('completing');
    });
  }, 6500);
}

// Scene 6: Reward redeeming
function animateRewardRedeem() {
  setTimeout(() => { const el = document.getElementById('rw-2'); if (el) { el.classList.add('redeeming'); spawnStarBurst(el); setTimeout(() => el.classList.remove('redeeming'), 2000); } }, 2000);
  setTimeout(() => { const el = document.getElementById('rw-4'); if (el) { el.classList.add('redeeming'); spawnStarBurst(el); setTimeout(() => el.classList.remove('redeeming'), 2000); } }, 3500);
}

// Scene 7: Calendar day selection animation
function animateCalendar() {
  const days = document.querySelectorAll('#calGrid .cal-day[data-day]');
  // Animate: click through a few days
  const sequence = [5, 3, 10]; // days to highlight
  let prev = document.querySelector('.cal-day.selected');

  sequence.forEach((dayNum, i) => {
    setTimeout(() => {
      // Remove old selected
      const oldSel = document.querySelector('.cal-day.selected');
      if (oldSel) oldSel.classList.remove('selected');
      // Add new selected
      const target = document.querySelector(`.cal-day[data-day="${dayNum}"]`);
      if (target) {
        target.classList.add('selected');
        spawnStarBurst(target);
      }
    }, 1500 + i * 1800);
  });
}

// Scene 8: Credit usage bars
function animateCredit() {
  setTimeout(() => {
    // Emma stays at 0% (no debt)
    // Lucas fills to 56%
    const lucasBar = document.getElementById('usage-lucas');
    const lucasPct = document.getElementById('lucas-pct');
    if (lucasBar) lucasBar.style.width = '56%';
    if (lucasPct) lucasPct.textContent = '56%';
  }, 800);
}

// Scene 9: Monthly report counters
function animateReport() {
  setTimeout(() => {
    animateNumber(document.getElementById('reportEarned'), 0, 247, 1500);
    animateNumber(document.getElementById('reportSpent'), 0, 85, 1500);
    // Emma
    animateNumber(document.getElementById('repEmmaEarn'), 0, 142, 1200);
    animateNumber(document.getElementById('repEmmaSpent'), 0, 40, 1200);
    animateNumber(document.getElementById('repEmmaNet'), 0, 102, 1200);
    animateNumber(document.getElementById('repEmmaBalance'), 0, 348, 1200);
    // Lucas
    animateNumber(document.getElementById('repLucasEarn'), 0, 105, 1200);
    animateNumber(document.getElementById('repLucasSpent'), 0, 45, 1200);
    animateNumber(document.getElementById('repLucasNet'), 0, 60, 1200);
    animateNumber(document.getElementById('repLucasBalance'), 0, 48, 1200);
  }, 800);
}

// Scene 10: Language switching (reversed for Chinese version: starts with Chinese, switches to English)
function animateLangSwitch() {
  const cnText = document.getElementById('langCN');
  const enText = document.getElementById('langEN');
  const cnFlag = document.getElementById('flagCN');
  const enFlag = document.getElementById('flagEN');
  cnText.className = 'font-cn text-title lang-text visible';
  enText.className = 'font-en text-title lang-text hidden-down';
  cnFlag.classList.add('active'); enFlag.classList.remove('active');
  let showEN = false;
  function toggle() {
    showEN = !showEN;
    if (showEN) {
      cnText.className = 'font-cn text-title lang-text hidden-up';
      enText.className = 'font-en text-title lang-text visible';
      cnFlag.classList.remove('active'); enFlag.classList.add('active');
    } else {
      cnText.className = 'font-cn text-title lang-text visible';
      enText.className = 'font-en text-title lang-text hidden-down';
      cnFlag.classList.add('active'); enFlag.classList.remove('active');
    }
  }
  setTimeout(toggle, 2000);
  setTimeout(toggle, 4000);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STAR BURST PARTICLES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function spawnStarBurst(targetEl) {
  const rect = targetEl.getBoundingClientRect();
  const cx = rect.left + rect.width / 2, cy = rect.top + rect.height / 2;
  for (let i = 0; i < 12; i++) {
    const p = document.createElement('div');
    p.style.cssText = `position:fixed;left:${cx}px;top:${cy}px;width:${Math.random()*4+2}px;height:${Math.random()*4+2}px;background:${['#FFD700','#FEF08A','#FBBF24'][Math.floor(Math.random()*3)]};border-radius:50%;pointer-events:none;z-index:200;box-shadow:0 0 6px rgba(255,215,0,0.8);`;
    document.body.appendChild(p);
    const angle = (Math.PI * 2 / 12) * i + (Math.random() - 0.5) * 0.5;
    const dist = 40 + Math.random() * 60;
    const dx = Math.cos(angle) * dist, dy = Math.sin(angle) * dist;
    const dur = 600 + Math.random() * 400;
    p.animate([
      { transform: 'translate(0,0) scale(1)', opacity: 1 },
      { transform: `translate(${dx}px,${dy}px) scale(0)`, opacity: 0 }
    ], { duration: dur, easing: 'cubic-bezier(0.16,1,0.3,1)', fill: 'forwards' });
    setTimeout(() => p.remove(), dur + 50);
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SHOOTING STARS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function spawnShootingStar() {
  const s = document.createElement('div');
  const x = Math.random() * W * 0.6, y = Math.random() * H * 0.3, len = 80 + Math.random() * 120;
  s.style.cssText = `position:fixed;left:${x}px;top:${y}px;width:${len}px;height:1.5px;background:linear-gradient(90deg,transparent,rgba(255,215,0,0.8),rgba(255,255,255,0.9));border-radius:999px;pointer-events:none;z-index:5;transform-origin:left center;transform:rotate(25deg);box-shadow:0 0 4px rgba(255,215,0,0.5);`;
  document.body.appendChild(s);
  s.animate([
    { transform: 'rotate(25deg) translateX(0) scaleX(0)', opacity: 0 },
    { transform: 'rotate(25deg) translateX(0) scaleX(1)', opacity: 1, offset: 0.1 },
    { transform: `rotate(25deg) translateX(${200+Math.random()*300}px) scaleX(1)`, opacity: 1, offset: 0.6 },
    { transform: `rotate(25deg) translateX(${400+Math.random()*400}px) scaleX(0.3)`, opacity: 0 }
  ], { duration: 1200 + Math.random() * 800, easing: 'ease-in', fill: 'forwards' });
  setTimeout(() => s.remove(), 2200);
}
setInterval(() => { if (Math.random() < 0.4) spawnShootingStar(); }, 3000);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LAUNCH
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
setTimeout(() => goToScene(0), 500);
</script>
</body>
</html>
