# ğŸ§ª Quest Classification System - æµ‹è¯•æ£€æŸ¥æ¸…å•

## å‰ç½®æ¡ä»¶ | Prerequisites

- âœ… æ•°æ®åº“å·²é‡ç½®ï¼ˆè¿è¡Œäº† COMPLETE_SCHEMA.sqlï¼‰
- âœ… å¼€å‘æœåŠ¡å™¨å·²å¯åŠ¨ (`npm run dev`)
- âœ… ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡® (`.env.local`)

---

## æµ‹è¯•æµç¨‹ | Test Flow

### 1ï¸âƒ£ è‡ªåŠ¨åŒ–æµ‹è¯• âœ…

```bash
npm test
```

**é¢„æœŸç»“æœï¼š**
```
Test Suites: 6 passed, 6 total
Tests:       53 passed, 53 total
```

**æµ‹è¯•è¦†ç›–ï¼š**
- âœ… Quest type system utilities (groupQuests, getChildVisibleQuests, getSuggestedStars)
- âœ… QuestGrid component (scope grouping, locale switching)
- âœ… QuickRecordForm component (type grouping, form validation)

---

### 2ï¸âƒ£ æ•°æ®åº“éªŒè¯

æ‰“å¼€ [Supabase Studio](https://supabase.com/dashboard) â†’ SQL Editor

è¿è¡Œæ–‡ä»¶ï¼š`TEST_QUERIES.sql` ä¸­çš„æŸ¥è¯¢

**å…³é”®éªŒè¯ç‚¹ï¼š**
- [ ] 7å¼ è¡¨å­˜åœ¨
- [ ] quests è¡¨æœ‰ type, scope, max_per_day å­—æ®µ
- [ ] ç´¢å¼• idx_quests_type å’Œ idx_quests_scope å­˜åœ¨
- [ ] å‡½æ•° initialize_family_templates å­˜åœ¨

---

### 3ï¸âƒ£ æ³¨å†Œæ–°å®¶åº­

è®¿é—®ï¼šhttp://localhost:3000/register

**æ“ä½œï¼š**
1. å¡«å†™å®¶é•¿ä¿¡æ¯ï¼š
   - Username: `test_parent`
   - Password: `Test1234!`
   - Display Name: `Test Parent`
2. æäº¤æ³¨å†Œ

**é¢„æœŸç»“æœï¼š**
- [ ] æ³¨å†ŒæˆåŠŸï¼Œè‡ªåŠ¨ç™»å½•
- [ ] è·³è½¬åˆ°å®¶é•¿ç«¯é¦–é¡µ `/admin`

**æ•°æ®åº“éªŒè¯ï¼š**
```sql
-- æ£€æŸ¥ä»»åŠ¡æ¨¡æ¿æ˜¯å¦åˆ›å»º
SELECT type, scope, COUNT(*)
FROM quests
WHERE family_id = (SELECT id FROM families WHERE parent_username = 'test_parent')
GROUP BY type, scope;
```

**åº”è¯¥çœ‹åˆ°ï¼š**
| type      | scope  | count |
|-----------|--------|-------|
| bonus     | family | 7     |
| bonus     | self   | 6     |
| bonus     | other  | 5     |
| duty      | self   | 11    |
| violation | self   | 7     |

---

### 4ï¸âƒ£ æ·»åŠ å­©å­è´¦å·

è®¿é—®ï¼šhttp://localhost:3000/admin/family

**æ“ä½œï¼š**
1. ç‚¹å‡» "Add Child"
2. å¡«å†™å­©å­ä¿¡æ¯ï¼š
   - Username: `test_child1`
   - Password: `Child1234!`
   - Display Name (EN): `Alice`
   - Display Name (ZH): `çˆ±ä¸½ä¸`
3. æäº¤

**é¢„æœŸç»“æœï¼š**
- [ ] å­©å­æ·»åŠ æˆåŠŸ
- [ ] åœ¨ Family Management çœ‹åˆ°å­©å­å¡ç‰‡

---

### 5ï¸âƒ£ æµ‹è¯•å®¶é•¿ç«¯ - å¿«é€Ÿè®°å½•

è®¿é—®ï¼šhttp://localhost:3000/admin/record

**UIæ£€æŸ¥ï¼š**
- [ ] çœ‹åˆ°é€‰æ‹©å­©å­çš„å¡ç‰‡ï¼ˆAliceï¼‰
- [ ] çœ‹åˆ°3ä¸ªä»»åŠ¡åˆ†ç»„ï¼š
  - [ ] â­ Did Good / åšäº†å¥½äº‹ (Bonus) - ç»¿è‰²è¾¹æ¡†
  - [ ] ğŸ“‹ Missed Duty / æ¼åšæœ¬åˆ† - é»„è‰²è¾¹æ¡†
  - [ ] âš ï¸ Violation / è¿è§„äº† - çº¢è‰²è¾¹æ¡†
- [ ] æ¯ç»„æ˜¾ç¤ºæ­£ç¡®æ•°é‡çš„ä»»åŠ¡ï¼š
  - Bonus: 18ä¸ª
  - Duty: 11ä¸ª
  - Violation: 7ä¸ª

**äº¤äº’æµ‹è¯•ï¼š**
- [ ] é€‰æ‹©å­©å­
- [ ] é€‰æ‹©ä¸€ä¸ª Bonus ä»»åŠ¡ï¼ˆä¾‹å¦‚ "Help wash dishes"ï¼‰
- [ ] æäº¤æŒ‰é’®å˜ä¸ºå¯ç”¨
- [ ] ç‚¹å‡»æäº¤
- [ ] çœ‹åˆ°æˆåŠŸæç¤º

**è‡ªå®šä¹‰ä»»åŠ¡æµ‹è¯•ï¼š**
- [ ] æ¸…é™¤é€‰æ‹©çš„ä»»åŠ¡
- [ ] åœ¨ "Custom description" è¾“å…¥ "å¸®é‚»å±…æ¬ä¸œè¥¿"
- [ ] è¾“å…¥æ˜Ÿæ˜Ÿæ•° +20
- [ ] æäº¤æˆåŠŸ

---

### 6ï¸âƒ£ æµ‹è¯•å­©å­ç«¯ - Bonus Quests

**æ“ä½œï¼š**
1. é€€å‡ºç™»å½•
2. ç”¨å­©å­è´¦å·ç™»å½•ï¼š
   - Username: `test_child1`
   - Password: `Child1234!`
3. è®¿é—®ï¼šhttp://localhost:3000/app/quests

**UIæ£€æŸ¥ï¼š**
- [ ] **åªæ˜¾ç¤º** Bonus Questsï¼ˆä¸æ˜¾ç¤º Duty å’Œ Violationï¼‰
- [ ] æ˜¾ç¤º3ä¸ªåˆ†ç»„ï¼š
  - [ ] ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Family / å®¶äºº (7ä¸ªä»»åŠ¡)
  - [ ] ğŸ‘¤ Self / è‡ªå·± (6ä¸ªä»»åŠ¡)
  - [ ] ğŸŒ Others / ä»–äºº (5ä¸ªä»»åŠ¡)
- [ ] æ¯ä¸ªä»»åŠ¡å¡ç‰‡æ˜¾ç¤ºï¼š
  - å›¾æ ‡ (emoji)
  - ä»»åŠ¡åç§°
  - æ˜Ÿæ˜Ÿæ•°ï¼ˆ+15, +20 ç­‰ï¼‰
  - ç±»åˆ«æ ‡ç­¾ï¼ˆChores, Learning, Social ç­‰ï¼‰

**ä»»åŠ¡ç¤ºä¾‹æ£€æŸ¥ï¼š**

**Familyç»„ï¼š**
- [ ] ğŸ³ Help wash dishes / å¸®å¿™æ´—ç¢— (+15)
- [ ] ğŸ‘¨â€ğŸ³ Help cook / å¸®å¿™åšé¥­ (+15)
- [ ] ğŸ§¹ Clean room / æ‰“æ‰«æˆ¿é—´ (+10)

**Selfç»„ï¼š**
- [ ] ğŸ“– Extra reading 30 min / é¢å¤–é˜…è¯»30åˆ†é’Ÿ (+15)
- [ ] ğŸµ Practice instrument 30 min / ç»ƒä¹ ä¹å™¨30åˆ†é’Ÿ (+20)

**Othersç»„ï¼š**
- [ ] ğŸ‘« Help classmates / å¸®åŠ©åŒå­¦ (+20)
- [ ] ğŸ¤ Community service / ç¤¾åŒºæœåŠ¡ (+30)

---

### 7ï¸âƒ£ æµ‹è¯•ç”³è¯·æ˜Ÿæ˜ŸåŠŸèƒ½

**æ“ä½œï¼š**
1. åœ¨å­©å­ç«¯ Quests é¡µé¢
2. ç‚¹å‡»ä»»æ„ä»»åŠ¡å¡ç‰‡ï¼ˆä¾‹å¦‚ "Help wash dishes"ï¼‰
3. å¼¹å‡º Modal

**Modalæ£€æŸ¥ï¼š**
- [ ] æ˜¾ç¤ºä»»åŠ¡åç§°å’Œå›¾æ ‡
- [ ] æ˜¾ç¤ºæ˜Ÿæ˜Ÿæ•°
- [ ] æœ‰å¤‡æ³¨è¾“å…¥æ¡†
- [ ] æœ‰ Submit æŒ‰é’®

**æäº¤ç”³è¯·ï¼š**
- [ ] è¾“å…¥å¤‡æ³¨ï¼š"ä»Šå¤©å¸®å¦ˆå¦ˆæ´—äº†æ™šé¥­çš„ç¢—"
- [ ] ç‚¹å‡» Submit
- [ ] æˆåŠŸæç¤º
- [ ] Modalå…³é—­

**å®¶é•¿ç«¯éªŒè¯ï¼š**
- [ ] åˆ‡æ¢åˆ°å®¶é•¿è´¦å·
- [ ] è®¿é—® Approvals é¡µé¢
- [ ] çœ‹åˆ°å­©å­çš„ç”³è¯·
- [ ] å¯ä»¥æ‰¹å‡†æˆ–æ‹’ç»

---

### 8ï¸âƒ£ æµ‹è¯•è¯­è¨€åˆ‡æ¢

**è‹±æ–‡ç•Œé¢ï¼š**
- [ ] å³ä¸Šè§’ç‚¹å‡» "ä¸­æ–‡"
- [ ] æ‰€æœ‰ä»»åŠ¡åç§°å˜æˆä¸­æ–‡
- [ ] åˆ†ç»„æ ‡é¢˜å˜æˆä¸­æ–‡

**ä¸­æ–‡ç•Œé¢ï¼š**
- [ ] ç‚¹å‡» "English"
- [ ] æ‰€æœ‰å†…å®¹å˜å›è‹±æ–‡

**éªŒè¯é¡¹ï¼š**
- [ ] ä»»åŠ¡åç§°æ­£ç¡®åˆ‡æ¢
- [ ] ç±»åˆ«æ ‡ç­¾æ­£ç¡®åˆ‡æ¢
- [ ] UIæ–‡æ¡ˆæ­£ç¡®åˆ‡æ¢

---

### 9ï¸âƒ£ è¾¹ç•Œæƒ…å†µæµ‹è¯•

**ç©ºçŠ¶æ€ï¼š**
- [ ] åˆ›å»ºä¸€ä¸ªæ–°å®¶åº­ï¼Œä¸æ·»åŠ å­©å­
- [ ] è®¿é—® Quick Record é¡µé¢
- [ ] çœ‹åˆ° "No children in your family yet" æç¤º

**æ— ä»»åŠ¡çŠ¶æ€ï¼š**
- [ ] åˆ é™¤æ‰€æœ‰ Bonus questsï¼ˆåœ¨æ•°æ®åº“ä¸­ï¼‰
- [ ] å­©å­ç«¯ Quests é¡µé¢
- [ ] çœ‹åˆ°ç©ºçŠ¶æ€ï¼š"Your parents haven't set up any bonus quests yet!"

**å•ä¸€ç±»å‹ä»»åŠ¡ï¼š**
- [ ] åªä¿ç•™ Family scope çš„ Bonus quests
- [ ] å­©å­ç«¯åªæ˜¾ç¤º Family ç»„
- [ ] ä¸æ˜¾ç¤º Self å’Œ Others ç»„

---

### ğŸ”Ÿ æ€§èƒ½æµ‹è¯•

**å“åº”é€Ÿåº¦ï¼š**
- [ ] å­©å­ç«¯ Quests é¡µé¢åŠ è½½ < 1ç§’
- [ ] å®¶é•¿ç«¯ Record é¡µé¢åŠ è½½ < 1ç§’
- [ ] è¯­è¨€åˆ‡æ¢å“åº” < 200ms
- [ ] ç”³è¯·æäº¤å“åº” < 500ms

**æ•°æ®é‡æµ‹è¯•ï¼š**
- [ ] åˆ›å»º100+ä»»åŠ¡
- [ ] UIä»ç„¶æµç•…
- [ ] æ»šåŠ¨æ€§èƒ½æ­£å¸¸

---

## å·²çŸ¥é™åˆ¶ | Known Limitations

1. **Duty å’Œ Violation ä¸åœ¨å­©å­ç«¯æ˜¾ç¤º**
   - è¿™æ˜¯è®¾è®¡å†³ç­–ï¼Œç¬¦åˆæ­£å‘æ¿€åŠ±åŸåˆ™
   - åªåœ¨å®¶é•¿ç«¯è®°å½•æ—¶å¯è§

2. **max_per_day é™åˆ¶å°šæœªå®ç°**
   - å­—æ®µå·²æ·»åŠ 
   - å‰ç«¯é€»è¾‘å¾…å¼€å‘ï¼ˆPhase 4ï¼‰

3. **ä»»åŠ¡æ¨¡æ¿å›ºå®š**
   - æ³¨å†Œæ—¶è‡ªåŠ¨åˆ›å»º36ä¸ªæ¨¡æ¿
   - å®¶é•¿å¯ä»¥åœ¨ Quest Management é¡µé¢ä¿®æ”¹ï¼ˆå¾…å¼€å‘ï¼‰

---

## å›å½’æµ‹è¯• | Regression Tests

ç¡®ä¿åŸæœ‰åŠŸèƒ½ä»æ­£å¸¸ï¼š

- [ ] ç™»å½•/æ³¨å†ŒåŠŸèƒ½
- [ ] æ˜Ÿæ˜Ÿä½™é¢æ˜¾ç¤º
- [ ] å¥–åŠ±å…‘æ¢åŠŸèƒ½
- [ ] å®¶åº­ç®¡ç†åŠŸèƒ½
- [ ] äº¤æ˜“å†å²æŸ¥çœ‹

---

## æµ‹è¯•å®Œæˆæ ‡å‡† | Test Completion Criteria

âœ… æ‰€æœ‰è‡ªåŠ¨åŒ–æµ‹è¯•é€šè¿‡ (53/53)
âœ… æ•°æ®åº“ schema æ­£ç¡®
âœ… 36ä¸ªä»»åŠ¡æ¨¡æ¿è‡ªåŠ¨åˆ›å»º
âœ… å­©å­ç«¯åªæ˜¾ç¤º Bonus questsï¼ˆæŒ‰scopeåˆ†3ç»„ï¼‰
âœ… å®¶é•¿ç«¯æ˜¾ç¤ºæ‰€æœ‰ä»»åŠ¡ï¼ˆæŒ‰typeåˆ†3ç»„ï¼‰
âœ… è¯­è¨€åˆ‡æ¢æ­£å¸¸
âœ… ç”³è¯·æ˜Ÿæ˜Ÿæµç¨‹å®Œæ•´
âœ… æ— æ§åˆ¶å°é”™è¯¯
âœ… UIå“åº”æµç•…

---

## ğŸ› å‘ç°é—®é¢˜ï¼Ÿ

è®°å½•é—®é¢˜ï¼š

| é—®é¢˜æè¿° | ä¸¥é‡ç¨‹åº¦ | é‡ç°æ­¥éª¤ | çŠ¶æ€ |
|---------|---------|---------|------|
| ä¾‹å­ï¼šåˆ†ç»„æ ‡é¢˜æœªç¿»è¯‘ | ä½ | 1. åˆ‡æ¢åˆ°ä¸­æ–‡ 2. æŸ¥çœ‹åˆ†ç»„ | âŒ å¾…ä¿®å¤ |

---

**æµ‹è¯•æ—¶é—´ä¼°è®¡ï¼š** 30-45åˆ†é’Ÿ
**å»ºè®®æµ‹è¯•ç¯å¢ƒï¼š** Chrome, Safari, Firefox
**ç§»åŠ¨ç«¯æµ‹è¯•ï¼š** å»ºè®®ä½¿ç”¨ Chrome DevTools è®¾å¤‡æ¨¡æ‹Ÿå™¨

---

*æœ€åæ›´æ–°: 2025-01-02*
*æµ‹è¯•ç‰ˆæœ¬: Quest Classification System v2.0*
